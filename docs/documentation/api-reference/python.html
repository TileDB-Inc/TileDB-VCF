<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../documentation/assets/tiledb.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../quarto-materials/tiledb.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../quarto-materials/tiledb-logo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://tiledb.com" rel="" target="">
 <span class="menu-text">Home page</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://cloud.tiledb.com/auth/login" rel="" target="">
 <span class="menu-text">Login</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://tiledb.com/contact" rel="" target="">
 <span class="menu-text">Contact us</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/TileDB-Inc/TileDB-VCF" rel="" target="">
 <span class="menu-text">Repo</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TileDB-VCF</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Examples</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/tutorial_tiledbvcf_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TileDB-VCF Tutorial</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/tutorial_tiledbvcf_allele_frequencies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TileDB-VCF Allele Frequencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/tutorial_tiledbvcf_gwas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GWAS with the 1000 Genomes TileDB-VCF Dataset</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Ingestion</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/ingestion/cli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CLI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/ingestion/python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/ingestion/distributed-ingestion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distributed Ingestion</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">API Reference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/api-reference/cli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CLI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/reference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">How To</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/create-a-dataset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create a Dataset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/export-to-vcf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Export to VCF</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/handle-large-queries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Handle Large Queries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/ingest-samples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ingest Samples</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/perform-distributed-queries-with-tiledb-cloud.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Perform Distributed Queries with TileDB-Cloud</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/perform-distributed-queries-with-dask.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Perform Distributed Queries with Dask</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/perform-distributed-queries-with-spark.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Perform Distributed Queries with Spark</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/read-from-the-dataset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Read from the Dataset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/how-to/work-with-cloud-object-stores.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Work with Cloud Object Stores</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Background</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/the-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../documentation/data-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Model</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#python" id="toc-python" class="nav-link active" data-scroll-target="#python">Python</a>
  <ul class="collapse">
  <li><a href="#tiledbvcf.dataset" id="toc-tiledbvcf.dataset" class="nav-link" data-scroll-target="#tiledbvcf.dataset"><code>tiledbvcf.dataset</code></a>
  <ul class="collapse">
  <li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset"><code>Dataset</code></a></li>
  </ul></li>
  <li><a href="#create_dataset" id="toc-create_dataset" class="nav-link" data-scroll-target="#create_dataset"><code>create_dataset()</code></a>
  <ul class="collapse">
  <li><a href="#ingest_samples" id="toc-ingest_samples" class="nav-link" data-scroll-target="#ingest_samples"><code>ingest_samples()</code></a></li>
  <li><a href="#read-read_arrow" id="toc-read-read_arrow" class="nav-link" data-scroll-target="#read-read_arrow"><code>read()</code> / <code>read_arrow()</code></a></li>
  <li><a href="#read_completed" id="toc-read_completed" class="nav-link" data-scroll-target="#read_completed"><code>read_completed()</code></a></li>
  <li><a href="#count" id="toc-count" class="nav-link" data-scroll-target="#count"><code>count()</code></a></li>
  <li><a href="#attributes" id="toc-attributes" class="nav-link" data-scroll-target="#attributes"><code>attributes()</code></a></li>
  </ul></li>
  <li><a href="#tiledbvcf.readconfig" id="toc-tiledbvcf.readconfig" class="nav-link" data-scroll-target="#tiledbvcf.readconfig"><code>tiledbvcf.ReadConfig</code></a></li>
  <li><a href="#tiledbvcf.dask" id="toc-tiledbvcf.dask" class="nav-link" data-scroll-target="#tiledbvcf.dask"><code>tiledbvcf.dask</code></a>
  <ul class="collapse">
  <li><a href="#read_dask" id="toc-read_dask" class="nav-link" data-scroll-target="#read_dask"><code>read_dask()</code></a></li>
  <li><a href="#map_dask" id="toc-map_dask" class="nav-link" data-scroll-target="#map_dask"><code>map_dask()</code></a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/TileDB-Inc/TileDB-VCF/edit/main/documentation/api-reference/python.md" class="toc-action">Edit this page</a></p><p><a href="https://github.com/TileDB-Inc/TileDB-VCF/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="python" class="level1">
<h1>Python</h1>
<section id="tiledbvcf.dataset" class="level2">
<h2 class="anchored" data-anchor-id="tiledbvcf.dataset"><code>tiledbvcf.dataset</code></h2>
<p>This is the main Python module.</p>
<section id="dataset" class="level3">
<h3 class="anchored" data-anchor-id="dataset"><code>Dataset</code></h3>
<p>Representation of the grouped TileDB arrays that constitute a TileDB-VCF dataset, which includes a sparse 3D array containing the actual variant data and a sparse 1D array containing various sample metadata and the VCF header lines. Read more about the data model <a href="../../documentation/data-model.html">here</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Dataset(<span class="va">self</span>, uri, mode<span class="op">=</span><span class="st">'r'</span>, cfg<span class="op">=</span><span class="va">None</span>, stats<span class="op">=</span><span class="va">False</span>, verbose<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments" class="level4">
<h4 class="anchored" data-anchor-id="arguments"><strong>Arguments</strong></h4>
<ul>
<li><code>uri</code>: URI of TileDB-VCF dataset</li>
<li><code>mode</code>: (default <code>'r'</code>) Open the array object in read <code>'r'</code> or write <code>'w'</code> mode</li>
<li><code>cfg</code>: TileDB-VCF configuration (optional)</li>
<li><code>stats</code>: (<code>bool</code>) Enable of disable TileDB stats</li>
<li><code>verbose</code>: (<code>bool</code>) Enable of disable TileDB-VCF verbose output</li>
</ul>
</section>
</section>
</section>
<section id="create_dataset" class="level2">
<h2 class="anchored" data-anchor-id="create_dataset"><code>create_dataset()</code></h2>
<p>Create a new TileDB-VCF dataset.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>create_dataset(extra_attrs<span class="op">=</span><span class="va">None</span>, tile_capacity<span class="op">=</span><span class="va">None</span>, anchor_gap<span class="op">=</span><span class="va">None</span>, checksum_type<span class="op">=</span><span class="va">None</span>, allow_duplicates<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments-1" class="level4">
<h4 class="anchored" data-anchor-id="arguments-1">Arguments</h4>
<ul>
<li><code>extra_attrs</code>: (<em>list</em> of <em>str</em> attrs) list of extra attributes to materialize from the <code>FMT</code> or <code>INFO</code> field. Names should be <code>fmt_X</code> or <code>info_X</code> for a field name <code>X</code> (case sensitive).</li>
<li><code>tile_capacity</code>: (<em>int</em>) Tile capacity to use for the array schema (default <code>10000</code>)</li>
<li><code>anchor_gap</code>: (<em>int</em>) Length of gaps between inserted anchor records in bases (default = <code>1000</code>)</li>
<li><code>checksum_type</code>: (<em>str</em> checksum) Optional override checksum type for creating new dataset (valid values are <code>'sha256'</code>, <code>'md5'</code> or <code>None</code>)</li>
<li><code>allow_duplicates</code>: (<code>bool</code>) Controls whether records with duplicate end positions can be ingested written to the dataset</li>
</ul>
</section>
<section id="ingest_samples" class="level3">
<h3 class="anchored" data-anchor-id="ingest_samples"><code>ingest_samples()</code></h3>
<p>Ingest samples into an existing TileDB-VCF dataset.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ingest_samples(sample_uris<span class="op">=</span><span class="va">None</span>, threads<span class="op">=</span><span class="va">None</span>, thread_task_size<span class="op">=</span><span class="va">None</span>, memory_budget_mb<span class="op">=</span><span class="va">None</span>, scratch_space_path<span class="op">=</span><span class="va">None</span>, scratch_space_size<span class="op">=</span><span class="va">None</span>, record_limit<span class="op">=</span><span class="va">None</span>, sample_batch_size<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments-2" class="level4">
<h4 class="anchored" data-anchor-id="arguments-2"><strong>Arguments:</strong></h4>
<ul>
<li><code>sample_uris</code>: (<em>list</em> of <em>str</em> samples) CSV list of VCF/BCF sample URIs to ingest</li>
<li><code>threads</code>: (<em>int</em>) Set the number of threads used for ingestion</li>
<li><code>thread_task_size</code>: (<em>int</em>) Set the max length (# columns) of an ingestion task (affects load balancing of ingestion work across threads and total memory consumption)</li>
<li><code>memory_budget_mb</code>: (<em>int</em>) Set the max size (MB) of TileDB buffers before flushing (default <code>1024</code>)</li>
<li>record_limit</li>
<li><code>str scratch_space_path</code>: (<em><code>str</code></em>) Directory used for local storage of downloaded remote samples</li>
<li><code>scratch_space_size</code>: (<code>int</code>) Amount of local storage that can be used for downloading remote samples (MB)</li>
<li><code>sample_batch_size</code>: (<code>int</code>) Number of samples per batch for ingestion (default <code>10</code>)</li>
<li><code>record_limit</code>: Limit the number of VCF records read into memory per file (default <code>50000</code>)</li>
<li><code>resume</code>: (<code>bool</code>) Whether to check and attempt to resume a partial completed ingestion</li>
</ul>
</section>
</section>
<section id="read-read_arrow" class="level3">
<h3 class="anchored" data-anchor-id="read-read_arrow"><code>read()</code> / <code>read_arrow()</code></h3>
<p>Reads data from a TileDB-VCF dataset into a Pandas Dataframe (with <code>read()</code>) or a PyArrow Array (with <code>read_arrow()</code>).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>read(attrs, samples<span class="op">=</span><span class="va">None</span>, regions<span class="op">=</span><span class="va">None</span>, samples_file<span class="op">=</span><span class="va">None</span>, bed_file<span class="op">=</span><span class="va">None</span>, skip_check_samples<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments-3" class="level4">
<h4 class="anchored" data-anchor-id="arguments-3"><strong>Arguments</strong></h4>
<ul>
<li><code>attrs</code>: (<em>list</em> of <em>str</em> attrs) List of attributes to extract. Can include attributes from the VCF <em>INFO</em> and <em>FORMAT</em> fields (prefixed with <code>info_</code> and <code>fmt_</code>, respectively) as well as any of the builtin attributes:
<ul>
<li><code>sample_name</code></li>
<li><code>id</code></li>
<li><code>contig</code></li>
<li><code>alleles</code></li>
<li><code>filters</code></li>
<li><code>pos_start</code></li>
<li><code>pos_end</code></li>
<li><code>qual</code></li>
<li><code>query_bed_end</code></li>
<li><code>query_bed_start</code></li>
<li><code>query_bed_line</code></li>
</ul></li>
<li><code>samples</code>: (<em>list</em> of <em>str</em> samples) CSV list of sample names to be read</li>
<li><code>regions</code>: (<em>list</em> of <em>str</em> regions) CSV list of genomic regions to be read</li>
<li><code>samples_file</code>: (<em>str</em> filesystem location) URI of file containing sample names to be read, one per line</li>
<li><code>bed_file</code>: (<em>str</em> filesystem location) URI of a BED file of genomic regions to be read</li>
<li><code>skip_check_samples</code>: (<em>bool</em>) Should checking the samples requested exist in the array</li>
<li><code>disable_progress_estimation</code>: (<em>bool</em>) Should we skip estimating the progress in verbose mode? Estimating progress can have performance or memory impacts in some cases.</li>
</ul>
</section>
<section id="details" class="level4">
<h4 class="anchored" data-anchor-id="details"><strong>Details</strong></h4>
<p>For large datasets, a call to <code>read()</code> may not be able to fit all results in memory. In that case, the returned dataframe will contain as many results as possible, and in order to retrieve the rest of the results, use the <code>continue_read()</code> function.</p>
<p>You can also use the Python generator version, <code>read_iter()</code>.</p>
<p><strong>Returns</strong>: Pandas <code>DataFrame</code> containing results.</p>
</section>
</section>
<section id="read_completed" class="level3">
<h3 class="anchored" data-anchor-id="read_completed"><code>read_completed()</code></h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>read_completed()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="details-1" class="level4">
<h4 class="anchored" data-anchor-id="details-1"><strong>Details</strong></h4>
<p>A read is considered complete if the resulting dataframe contained all results.</p>
<p><strong>Returns:</strong> (<code>bool</code>) <code>True</code> if the previous read operation was complete</p>
</section>
</section>
<section id="count" class="level3">
<h3 class="anchored" data-anchor-id="count"><code>count()</code></h3>
<p>Counts data in a TileDB-VCF dataset.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>count(samples<span class="op">=</span><span class="va">None</span>, regions<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments-4" class="level4">
<h4 class="anchored" data-anchor-id="arguments-4"><strong>Arguments</strong></h4>
<ul>
<li><code>samples</code>: (<em>list</em> of <em>str</em> samples) CSV list of sample names to include in the count</li>
<li><code>regions</code>: (<em>list</em> of <em>str</em> regions) CSV list of genomic regions to include in the count</li>
</ul>
</section>
<section id="details-2" class="level4">
<h4 class="anchored" data-anchor-id="details-2"><strong>Details</strong></h4>
<p><strong>Returns:</strong> Number of intersecting records in the dataset</p>
</section>
</section>
<section id="attributes" class="level3">
<h3 class="anchored" data-anchor-id="attributes"><code>attributes()</code></h3>
<p>List queryable attributes available in the VCF dataset</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>attributes(attr_type <span class="op">=</span> <span class="st">"all"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments-5" class="level4">
<h4 class="anchored" data-anchor-id="arguments-5"><strong>Arguments</strong></h4>
<ul>
<li><code>attr_type</code>: (<em>list</em> of <em>str</em> attributes) The subset of attributes to retrieve; <code>"info"</code> or <code>"fmt"</code> will only retrieve attributes ingested from the VCF <code>INFO</code> and <code>FORMAT</code> fields, respectively, <code>"builtin"</code> retrieves the static attributes defined in TileDB-VCF’s schema, <code>"all"</code> (the default) returns all queryable attributes</li>
</ul>
</section>
<section id="details-3" class="level4">
<h4 class="anchored" data-anchor-id="details-3"><strong>Details</strong></h4>
<p><strong>Returns:</strong> a list of strings representing the attribute names</p>
</section>
</section>
</section>
<section id="tiledbvcf.readconfig" class="level2">
<h2 class="anchored" data-anchor-id="tiledbvcf.readconfig"><code>tiledbvcf.ReadConfig</code></h2>
<p>Set various configuration parameters.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ReadConfig(limit, region_partition, sample_partition, sort_regions, memory_budget_mb, tiledb_config)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Parameters</strong></p>
<ul>
<li><code>limit</code>: max number of records (rows) to read</li>
<li><code>region_partition</code>: Region partition tuple (idx, num_partitions)</li>
<li><code>sample_partition</code>: Samples partition tuple (idx, num_partitions)</li>
<li><code>sort_regions</code>: Whether or not to sort the regions to be read (default <code>True</code>)</li>
<li><code>memory_budget_mb</code>: Memory budget (MB) for buffer and internal allocations (default <code>2048</code>)</li>
<li><code>buffer_percentage</code>: Percentage of memory to dedicate to TileDB Query Buffers (default: <code>25</code>)</li>
<li><code>tiledb_tile_cache_percentage</code>: Percentage of memory to dedicate to TileDB Tile Cache (default: <code>10</code>)</li>
<li><code>tiledb_config</code>: List of strings in the format <code>"option=value"</code> (see <a href="broken-reference">here</a> for full list TileDB configuration parameters)</li>
</ul>
</section>
<section id="tiledbvcf.dask" class="level2">
<h2 class="anchored" data-anchor-id="tiledbvcf.dask"><code>tiledbvcf.dask</code></h2>
<p>This module is for the TileDB-VCF integration with Dask.</p>
<section id="read_dask" class="level3">
<h3 class="anchored" data-anchor-id="read_dask"><code>read_dask()</code></h3>
<p>Reads data from a TileDB-VCF dataset into a Dask <code>DataFrame</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>read_dask(attrs, region_partitions<span class="op">=</span><span class="dv">1</span>, sample_partitions<span class="op">=</span><span class="dv">1</span>, samples<span class="op">=</span><span class="va">None</span>, regions<span class="op">=</span><span class="va">None</span>, samples_file<span class="op">=</span><span class="va">None</span>, bed_file<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments-6" class="level4">
<h4 class="anchored" data-anchor-id="arguments-6">Arguments</h4>
<ul>
<li><code>attrs</code>: (<em>list</em> of <em>str</em> attrs) List of attribute names to be read</li>
<li><code>region_partitions</code> (<em>int</em> partitions) Number of partitions over regions</li>
<li><code>sample_partitions</code> (<em>int</em> partitions) Number of partitions over samples</li>
<li><code>samples</code>: (<em>list</em> of <em>str</em> samples) CSV list of sample names to be read</li>
<li><code>regions</code>: (<em>list</em> of <em>str</em> regions) CSV list of genomic regions to be read</li>
<li><code>samples_file</code>: (<em>str</em> filesystem location) URI of file containing sample names to be read, one per line</li>
<li><code>bed_file</code>: (<em>str</em> filesystem location) URI of a BED file of genomic regions to be read</li>
</ul>
</section>
<section id="details-4" class="level4">
<h4 class="anchored" data-anchor-id="details-4">Details</h4>
<p>Partitioning proceeds by a straightforward block distribution, parameterized by the total number of partitions and the particular partition index that a particular read operation is responsible for.</p>
<p>Both region and sample partitioning can be used together.</p>
<p><strong>Returns</strong>: Dask <code>DataFrame</code> with results</p>
</section>
</section>
<section id="map_dask" class="level3">
<h3 class="anchored" data-anchor-id="map_dask"><code>map_dask()</code></h3>
<p>Maps a function on a Dask <code>DataFrame</code> obtained by reading from the dataset.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>map_dask(fnc, attrs, region_partitions<span class="op">=</span><span class="dv">1</span>, sample_partitions<span class="op">=</span><span class="dv">1</span>, samples<span class="op">=</span><span class="va">None</span>, regions<span class="op">=</span><span class="va">None</span>, samples_file<span class="op">=</span><span class="va">None</span>, bed_file<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="arguments-7" class="level4">
<h4 class="anchored" data-anchor-id="arguments-7">Arguments</h4>
<ul>
<li><code>fnc</code>: (<em>function)</em> Function applied to each partition</li>
<li><code>attrs</code>: (<em>list</em> of <em>str</em> attrs) List of attribute names to be read</li>
<li><code>region_partitions</code> (<em>int</em> partitions) Number of partitions over regions</li>
<li><code>sample_partitions</code> (<em>int</em> partitions) Number of partitions over samples</li>
<li><code>samples</code>: (<em>list</em> of <em>str</em> samples) CSV list of sample names to be read</li>
<li><code>regions</code>: (<em>list</em> of <em>str</em> regions) CSV list of genomic regions to be read</li>
<li><code>samples_file</code>: (<em>str</em> filesystem location) URI of file containing sample names to be read, one per line</li>
<li><code>bed_file</code>: (<em>str</em> filesystem location) URI of a BED file of genomic regions to be read</li>
</ul>
</section>
<section id="details-5" class="level4">
<h4 class="anchored" data-anchor-id="details-5">Details</h4>
<p>May be more efficient in some cases than <code>read_dask()</code> followed by a regular Dask map operation.</p>
<p><strong>Returns</strong>: Dask <code>DataFrame</code> with results</p>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>